"use strict";(self.webpackChunkdashboard_hosting=self.webpackChunkdashboard_hosting||[]).push([[592],{9230:(T,o,r)=>{r.d(o,{a:()=>_});var u=r(2340),s=r(5e3),c=r(7152),h=r(2520);let _=(()=>{class t{constructor(n,i){this.router=n,this.authenticationService=i}canActivate(n,i){const e=this.authenticationService.currentUserValue,a=new Date;if(e&&e.createdTime+e.expiresIn>Math.round(a.getTime()/1e3)&&1==e.status){if(e.createdTime+e.expiresIn-u.N.jwt.timeRefresh<Math.round(a.getTime()/1e3)){let l={id:e.id,accessToken:e.accessToken,refreshToken:e.refreshToken,username:e.username};return!!new Promise((f,v)=>{this.authenticationService.refreshToken(l).subscribe(m=>{1==m?f(!0):v(!1)})})||(this.authenticationService.logout(),!1)}return!0}return e&&this.authenticationService.logout(),this.authenticationService.logout(),!1}}return t.\u0275fac=function(n){return new(n||t)(s.LFG(c.F0),s.LFG(h.$))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);